## Hwacha v4 VVADD ASM code

.text
.align 2

.globl vec_vvadd_asm
.type  vec_vvadd_asm,@function

### Rocket execution part ###
vec_vvadd_asm:
    vsetcfg 3, 1
stripmine:
    vsetvl t0, a0
    vmca va0, a2
    vmca va1, a3
    vmca va2, a1
    la t5, vvadd_v
    vf 0(t5)
    slli t1, t0, 2
    add a1, a1, t1
    add a2, a2, t1
    add a3, a3, t1
    sub a0, a0, t0
    bnez a0, stripmine
    fence
    ret

### Hwacha execution part ###
# vector thread asm
.align 3
vvadd_v:
    vpset vp0
    vlw vv0, va0
    vlw vv1, va1
    vadd vv2, vv0, vv1
    vsw vv2, va2
    vstop
